# Maintainer: george <rpubaddr0 {at} gmail [dot] com>

pkgname=dff
pkgver=1.2.0
pkgrel=1
pkgdesc='The free and open source Digital Forensics Framework.'
arch=('i686' 'x86_64')
url='http://digital-forensic.org/'
license=('GPL')
makedepends=('cmake>=2.8' 'swig' 'qt')
depends=('python2' 'pyqt' 'fuse' 'libewf' 'afflib' 'libbfio' 
         'libpff' 'python2-magic' 'tre' 'python2-apsw')
conflicts=('dff-git')
source=("http://ftp.arxsys.fr/old_dff_releases/dff-src-1.2.0.tar.gz"
        'dff.desktop')
sha256sums=('e6342f1b105fa9077d4b859e1dba0214e5e899ce152b9d26342a9f14659c6de6'
            '00a7a84d4286883ca648c9771dfe624ce2c112caff7610bca0dfc35d19537886')

build() {
  cd "${pkgname}-${pkgver}"
  mkdir -p build
  cd build
  cmake -DINSTALL=1 ..
  make
}

package() {
  cd "${pkgname}-${pkgver}/build"
  make DESTDIR="${pkgdir}" install
  install -dm755 "${pkgdir}/usr/share/applications/"
  install -Dm755 "${startdir}/dff.desktop" "${pkgdir}/usr/share/applications/dff.desktop"
  [[ -f /usr/lib/libtre.so.4 ]] || ln -sv /usr/lib/libtre.so /usr/lib/libtre.so.4
}
